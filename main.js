!function(e){function t(t){for(var i,h,n=t[0],r=t[1],l=t[2],p=0,d=[];p<n.length;p++)h=n[p],a[h]&&d.push(a[h][0]),a[h]=0;for(i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i]);for(c&&c(t);d.length;)d.shift()();return o.push.apply(o,l||[]),s()}function s(){for(var e,t=0;t<o.length;t++){for(var s=o[t],i=!0,n=1;n<s.length;n++){var r=s[n];0!==a[r]&&(i=!1)}i&&(o.splice(t--,1),e=h(h.s=s[0]))}return e}var i={},a={1:0},o=[];function h(t){if(i[t])return i[t].exports;var s=i[t]={i:t,l:!1,exports:{}};return e[t].call(s.exports,s,s.exports,h),s.l=!0,s.exports}h.m=e,h.c=i,h.d=function(e,t,s){h.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:s})},h.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},h.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return h.d(t,"a",t),t},h.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},h.p="";var n=window.webpackJsonp=window.webpackJsonp||[],r=n.push.bind(n);n.push=t,n=n.slice();for(var l=0;l<n.length;l++)t(n[l]);var c=r;o.push([1122,0]),s()}({1122:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),s(1121);const i=s(486),a=s(453),o={type:Phaser.WEBGL,backgroundColor:"#ADD8E6",parent:"game",width:400,height:240,zoom:2,pixelArt:!0,physics:{default:"arcade",arcade:{tilebias:4,gravity:{y:600},debug:!0}},scene:[i.BootScene,a.CrateboxScene]};new Phaser.Game(o)},127:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=s(63);class a extends i.Pistol{constructor(e,t,s,i="guns",a="smg"){super(e,t,s,i,a),this.id="SMG",this.sfx="enemyshot",this.sfxMin=1,this.sfxMax=2.5,this.cooldown=75,this.shootTimer=75,this.recoil=30,this.damage=2,this.pushBackFloor=40,this.pushBackAir=60,this.angleSpread=25,this.projectile={velocity:400,size:5,gravity:!1,key:"smgproj",anim:"projectile"}}shoot(){this.scene.events.emit("sfx",this.sfx,Phaser.Math.FloatBetween(this.sfxMin,this.sfxMax));const e=this.flipX?this.x-8:this.x+8,t=this.scene.projectileGroup.create(e,this.y,"projectiles",this.projectile.key).setData("bypass",!0).setData("dmg",this.damage).setData("onCollide",this.projectileCollide);return t.anims.play("projectilefast"),t.body.setVelocityX(this.flipX?-this.projectile.velocity:this.projectile.velocity).setVelocityY(Phaser.Math.Between(-this.angleSpread,this.angleSpread)).setSize(this.projectile.size,this.projectile.size).setBounceY(1).allowGravity=this.projectile.gravity,this.scene.tweens.add({targets:this,duration:this.cooldown/2,ease:"Sine.easeInOut",yoyo:!0,angle:this.flipX?this.recoil:-this.recoil}),this.shootTimer=0,this.scene.player.body.onFloor()?this.flipX?this.pushBackFloor:-this.pushBackFloor:this.flipX?this.pushBackAir:-this.pushBackAir}}a.id="SMG",t.Smg=a},206:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=s(127);class a extends i.Smg{constructor(e,t,s,i="guns",a="minigun"){super(e,t,s,i,a),this.id="MINIGUN",this.sfx="enemyshot",this.sfxMin=.5,this.sfxMax=.5,this.cooldown=40,this.shootTimer=30,this.recoil=10,this.damage=2,this.pushBackFloor=90,this.pushBackAir=300,this.angleSpread=150,this.projectile={velocity:600,size:5,gravity:!1,key:"smgproj",anim:"projectilefast"},this.projectileCollide=((e,t)=>{t.events.emit("sfx","foley"),e.destroy()})}shoot(){return this.scene.minishake(),super.shoot()}}a.id="MINIGUN",t.Minigun=a},207:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=s(63);class a extends i.Pistol{constructor(e,t,s,i="guns",a="dualgun"){super(e,t,s,i,a),this.id="DUALS",this.cooldown=200,this.shootTimer=200,this.recoil=200,this.damage=3,this.size=10,this.projectileCollide=((e,t)=>{t.events.emit("sfx","foley"),e.destroy()}),this.body.setSize(this.size,this.size).allowGravity=!1}update(e,t){this.x=this.scene.player.x,this.y=this.scene.player.y,this.setDepth(9),this.shootTimer+=t}shoot(e=!1){if(this.canShoot){e&&this.scene.minishake();const t=this.x+16,s=this.x-16;this.canShoot=!1,this.released=!1,this.scene.events.emit("sfx",this.sfx,Phaser.Math.FloatBetween(.7,1.1));const i=this.scene.projectileGroup.create(t,this.y,"projectiles",this.projectile.key).setData("dmg",this.damage).setData("onCollide",this.projectileCollide);i.anims.play(this.projectile.anim);const a=this.scene.projectileGroup.create(s,this.y,"projectiles",this.projectile.key).setData("dmg",this.damage).setData("onCollide",this.projectileCollide);a.anims.play(this.projectile.anim),a.body.setVelocityX(-this.projectile.velocity).setSize(this.projectile.size,this.projectile.size).allowGravity=this.projectile.gravity,i.body.setVelocityX(this.projectile.velocity).setSize(this.projectile.size,this.projectile.size).allowGravity=this.projectile.gravity,this.scene.time.addEvent({delay:this.cooldown,callbackScope:this,callback(){this.active&&this.released&&(this.canShoot=!0)}}),this.scene.tweens.add({targets:this,duration:48,ease:"Sine.easeIn",yoyo:!0,angle:this.flipX?10:-10,callbackScope:this,onComplete(){this.setAngle(0)}}),this.shootTimer=0}else this.scene.time.addEvent({delay:this.cooldown,callbackScope:this,callback(){this.active&&this.released&&(this.canShoot=!0)}});return 0}}a.id="DUALS",t.DualPistol=a},208:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=s(31),a=s(210);class o extends i.Gun{constructor(e,t,s,i="guns",a="shotgun"){super(e,t,s,i,a),this.id="SHOTGUN",this.sfx="death",this.reloaded=!0,this.cooldown=650,this.shootTimer=650,this.recoil=800,this.damage=1.5,this.size=10,this.projectile={velocity:900,amount:6,size:3,gravity:!1,key:"smgproj"},this.projectileTimer=0,this.projRef=[],this.projectileCollide=((e,t)=>{e.setAlpha(.7)}),this.body.setSize(this.size,this.size).allowGravity=!1}update(e,t){this.x=this.flipX?this.scene.player.x-8:this.scene.player.x+8,this.y=this.scene.player.y,this.flipX=this.scene.player.flipX,this.setDepth(this.flipX?11:9),this.shootTimer+=t,this.projectileTimer+=t,this.shootTimer>this.cooldown-200&&!this.reloaded&&(this.scene.events.emit("sfx","shotgunreload"),this.reloaded=!0)}shoot(){return this.scene.events.emit("sfx",this.sfx),this.scene.minishake(),this.projRef=this.scene.projectileGroup.createMultiple({key:"projectiles",frame:this.projectile.key,repeat:this.projectile.amount,setXY:{x:this.x,y:this.y}}),this.projRef.forEach(e=>{e.body.setVelocityX(this.flipX?-this.projectile.velocity:this.projectile.velocity).setVelocityY(Phaser.Math.Between(-150,120)).setSize(this.projectile.size,this.projectile.size).setBounce(.7,2).setDragX(Phaser.Math.Between(3e3,4e3)).allowGravity=this.projectile.gravity}),this.projRef.forEach(e=>e.setData("dmg",this.damage).setData("bypass",!0).setData("id","shotgun").setData("onCollide",this.projectileCollide).setData("force",4)),this.scene.time.addEvent({delay:270,callback(){this.projectileGroup.children.each(e=>{"shotgun"===e.getData("id")?e.destroy():a.noop()},void 0)},callbackScope:this.scene,loop:!1}),this.scene.tweens.add({targets:this,duration:200,ease:"Power2",yoyo:!0,angle:this.flipX?90:-90}),this.shootTimer=0,this.projectileTimer=0,this.reloaded=!1,0}preDestroy(){}}o.id="SHOTGUN",t.Shotgun=o},209:function(e,t,s){"use strict";function i(e){for(var s in e)t.hasOwnProperty(s)||(t[s]=e[s])}Object.defineProperty(t,"__esModule",{value:!0});const a=s(63),o=s(127),h=s(208),n=s(207),r=s(206),l=s(446),c=s(445),p=s(444),d=s(443),y=s(442),m=s(441),u=s(440),f=s(439);t.DefaultGun=a.Pistol,t.guns=[a.Pistol,p.Revolver,n.DualPistol,o.Smg,h.Shotgun,r.Minigun,l.GrenadeLauncher,c.RocketLauncher,d.FryingPan,y.Mines,m.DiscGun,u.Flamethrower,f.LaserGun],i(s(31)),i(s(437)),i(s(63)),i(s(127)),i(s(206)),i(s(208)),i(s(207))},210:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.noop=(()=>void 0),t.center=function(e,t,s=" "){return s.repeat((t-e.length)/2)+e}},31:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Gun=class extends Phaser.GameObjects.Sprite{constructor(e,t,s,i="gun",a){super(e,t,s,i,a),this.canShoot=!0,this.scene.physics.world.enable(this)}shoot(...e){}unShoot(...e){}update(e,t){}preDestroy(){}}},437:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=s(209);class a{static createGun(e,t,s,i){return new i(e,t,s)}static createRandomGun(e,t,s){return this.createGun(e,t,s,this.getRandomGun())}static createDefaultGun(e,t,s){return this.createGun(e,t,s,this.defaultGun)}static getRandomGun(){const e=Phaser.Math.Between(0,i.guns.length-1);return e!==this.roll?(this.roll=e,i.guns[e]):this.getRandomGun()}static getNextGun(e,t,s,a){let o;const h=i.guns.findIndex(e=>e.id===a.id);return o=h+1,h>=i.guns.length-1&&(o=0),this.createGun(e,t,s,i.guns[o])}}a.roll=0,a.defaultGun=i.DefaultGun,t.GunFactory=a},438:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LaserBeam=class extends Phaser.GameObjects.Sprite{constructor(e,t,s,i="projectiles",a="projectile"){super(e,t,s,i,a),this.exploded=!1,this.explode=((e,t)=>{t.events.emit("sfx","laser2"),t.minishake(),e.x=t.player.flipX?t.player.x-16:t.player.x+16,e.setFrame("beam00"),e.flipY=!0,e.body.setOffset(e.flipX?-8:8,0),e.setOrigin(e.flipX?1:0,.5),e.setScale(1,3),e.exploded=!0,t.tweens.add({targets:e,ease:Phaser.Math.Easing.Sine.In,scaleX:24,duration:100}),t.time.addEvent({delay:200,callback(e,t){t.tweens.add({targets:e,scaleY:0,duration:100,onComplete:(e,t)=>t[0].destroy()})},args:[e,t]})}),this.scene.physics.world.enable(this),this.setScale(.2,.2),this.scene.tweens.add({targets:this,duration:800,scaleY:1,scaleX:1}),this.scene.time.addEvent({delay:1e3,callback:this.explode,args:[this,this.scene],callbackScope:this})}update(e,t){this.exploded||(this.x=this.scene.player.flipX?this.scene.player.x-21:this.scene.player.x+21,this.y=this.scene.player.y-1,this.flipX=this.scene.player.flipX)}}},439:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=s(31),a=s(438);class o extends i.Gun{constructor(e,t,s,i="guns",a="lasergun"){super(e,t,s,i,a),this.id="LASERGUN",this.sfx="laser1",this.sfxRate=1,this.cooldown=1500,this.recoil=200,this.damage=12,this.size=10,this.shootTimer=1201,this.projectile={velocity:50,size:5,gravity:!1,key:"rocket"},this.body.setSize(this.size,this.size).allowGravity=!1}update(e,t){this.x=this.flipX?this.scene.player.x-8:this.scene.player.x+8,this.y=this.scene.player.y,this.flipX=this.scene.player.flipX,this.setDepth(this.flipX?11:9),this.shootTimer>this.cooldown/2&&(this.body.setAngularVelocity(0),this.setAngle(0)),this.shootTimer+=t}shoot(){this.shootTimer=0,this.scene.events.emit("sfx",this.sfx,this.sfxRate);const e=new a.LaserBeam(this.scene,this.x,this.y).setData("dmg",this.damage).setData("melee",!0);return e.body.allowGravity=!1,this.scene.projectileGroup.add(e,!0),0}}o.id="LASERGUN",t.LaserGun=o},440:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=s(63);class a extends i.Pistol{constructor(e,t,s,i="guns",a="flamethrower"){super(e,t,s,i,a),this.id="FLAMETHROWER",this.sfx="flamethrower",this.sfxCounter=0,this.cooldown=50,this.shootTimer=30,this.damage=2,this.angleSpread=100,this.projectile={velocity:300,size:16,gravity:!0,key:"fire",anim:"fire"},this.projectileCollide=((e,t)=>{e.body.setVelocity(0,50).allowGravity=!1}),this.onPlayer=((e,t,s)=>{t.jump()})}shoot(){3===this.sfxCounter?(this.scene.events.emit("sfx",this.sfx,Phaser.Math.FloatBetween(.2,1.5)),this.sfxCounter=0):this.sfxCounter++;const e=this.flipX?this.x-8:this.x+8,t=this.scene.projectileGroup.create(e,this.y-2,"projectiles",this.projectile.key).setData("melee",!0).setData("bypass",!1).setData("dmg",this.damage).setData("color",Phaser.Math.Between(230,255)).setData("onPlayer",this.onPlayer).setData("onCollide",this.projectileCollide);return t.setTint(Phaser.Display.Color.GetColor(0,100,200)),t.setAlpha(.45),t.z=5,t.setDepth(50),t.body.setDrag(300,450).setVelocityX(this.flipX?-this.projectile.velocity:this.projectile.velocity).setVelocityY(Phaser.Math.Between(-this.angleSpread,this.angleSpread)).setSize(this.projectile.size-4,this.projectile.size-8).setFriction(1,1).setAngularVelocity(Phaser.Math.Between(-200,200)).setBounceY(.2).allowGravity=this.projectile.gravity,t.setScale(.5,.5),this.scene.tweens.add({targets:t,alpha:1,scaleX:Phaser.Math.FloatBetween(1.5,2.1),scaleY:Phaser.Math.FloatBetween(1.5,2.5),duration:Phaser.Math.Between(600,1200),ease:"Back",yoyo:!0,onComplete:(e,t)=>{t[0].destroy()},onUpdate(e,t){const s=10*e.getValue();if(s>=10&&t.anims.play("fire"),s>5.6){const e=23*s;t.setTint(Phaser.Display.Color.GetColor(t.getData("color"),e,e))}}}),this.shootTimer=0,0}}a.id="FLAMETHROWER",t.Flamethrower=a},441:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=s(31);class a extends i.Gun{constructor(e,t,s,i="guns",a="discgun"){super(e,t,s,i,a),this.id="DISC GUN",this.sfx="disc",this.reloaded=!0,this.cooldown=650,this.shootTimer=650,this.recoil=800,this.damage=6,this.size=10,this.projectile={velocity:300,size:3,gravity:!1,key:"smgproj",anim:"disc"},this.projectileTimer=0,this.projRef=[],this.projectileCollide=((e,t)=>{e.getData("bounced")?(t.events.emit("sfx","foley"),e.destroy()):(t.events.emit("sfx","foley"),t.events.emit("sfx","disc",1.2),e.setData("bounced",!0))}),this.onPlayer=((e,t,s)=>{s.events.emit("sfx","disc",1.3),s.restart()}),this.enemyCollide=((e,t,s)=>{s.events.emit("sfx","disc",1.3)}),this.body.setSize(this.size,this.size).allowGravity=!1}update(e,t){this.x=this.flipX?this.scene.player.x-8:this.scene.player.x+8,this.y=this.scene.player.y,this.flipX=this.scene.player.flipX,this.setDepth(this.flipX?11:9),this.shootTimer+=t,this.projectileTimer+=t}shoot(){this.scene.events.emit("sfx",this.sfx);const e=this.scene.projectileGroup.create(this.x,this.y,"projectiles","disc00");return e.anims.play("disc"),e.setData("dmg",this.damage).setData("melee",!0).setData("bounced",!1).setData("onCollide",this.projectileCollide).setData("onPlayer",this.onPlayer).setData("onEnemy",this.enemyCollide),e.body.setVelocityX(this.flipX?-this.projectile.velocity:this.projectile.velocity).setSize(this.projectile.size,this.projectile.size).setBounceX(1).allowGravity=this.projectile.gravity,this.scene.tweens.add({targets:this,duration:100,ease:"Power2",yoyo:!0,displayOriginX:this.flipX?this.displayOriginX-6:this.displayOriginX+6}),this.shootTimer=0,this.projectileTimer=0,this.reloaded=!1,0}preDestroy(){}}a.id="DISC GUN",t.DiscGun=a},442:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=s(31);class a extends i.Gun{constructor(e,t,s,i="guns",a="mine"){super(e,t,s,i,a),this.id="MINES",this.sfx="shoot",this.sfxRate=1,this.cooldown=1200,this.recoil=200,this.damage=6,this.size=10,this.shootTimer=1200,this.projectile={velocity:0,size:16,gravity:!0,key:"smgproj"},this.explode=((e,t,s)=>{if(e.active){s.events.emit("sfx","death",.5);const t=new Phaser.Geom.Point(e.x,e.y),i=e.getData("collider");i&&i.destroy(),e.destroy();const a=s.add.image(t.x,t.y,"explosion");s.physics.world.enable(a),a.body.allowGravity=!1,a.setData("dmg",6).setData("force",10),s.explosionGroup.add(a),s.minishake(),a.setTint(Phaser.Display.Color.GetColor(0,0,0)),s.tweens.add({targets:a,duration:190,ease:"Back",yoyo:!0,scaleX:7,scaleY:6,onComplete(e,t){t[0].destroy()},onUpdate(e,t){const s=e.getValue();t.setAlpha(.16*s),s>5&&t.setTint(Phaser.Display.Color.GetColor(255,255,0)),s>7&&t.setTint(Phaser.Display.Color.GetColor(255,255,255))}})}}),this.projectileCollide=((e,t)=>{e.setAngle(0)}),this.enemyCollide=((e,t,s)=>{this.explode(e,t,s)}),this.body.setSize(this.size,this.size).allowGravity=!1}update(e,t){this.x=this.flipX?this.scene.player.x-8:this.scene.player.x+8,this.y=this.scene.player.y-4,this.flipX=this.scene.player.flipX,this.setDepth(this.flipX?11:9),this.shootTimer>this.cooldown/2&&(this.body.setAngularVelocity(0),this.setAngle(0)),this.shootTimer+=t}shoot(){this.shootTimer=0,this.scene.events.emit("sfx",this.sfx,this.sfxRate);const e=this.scene.add.sprite(this.x,this.y,"guns","mine").setData("dmg",0).setData("inExplosion",this.explode).setData("onEnemy",this.explode);this.scene.physics.world.enable(e);const t=this.scene.physics.add.collider(e,this.scene.groundLayer,e=>{e.setAngle(0)});return e.setData("collider",t),e.setAngle(10),e.body.setSize(this.projectile.size,this.projectile.size).allowGravity=this.projectile.gravity,this.scene.time.addEvent({delay:1e3,callback(e){this.events.emit("sfx","shotgunreload2"),e.setFrame("minearmed"),this.projectileGroup.add(e)},callbackScope:this.scene,args:[e],loop:!1}),0}}a.id="MINES",t.Mines=a},443:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=s(31);class a extends i.Gun{constructor(e,t,s,i="guns",a="fryingpan"){super(e,t,s,i,a),this.id="FRYINGPAN",this.sfx="shoot",this.reloaded=!0,this.cooldown=300,this.shootTimer=300,this.recoil=800,this.damage=7,this.size=32,this.projectile={velocity:900,amount:6,size:3,gravity:!1,key:"smgproj"},this.shooting=!1,this.projectileTimer=0,this.projRef=[],this.enemyCollide=((e,t,s)=>{t.flip()}),this.projectileCollide=((e,t)=>{e.setAlpha(.7)}),this.body.setSize(this.size,this.size).allowGravity=!1}update(e,t){this.shooting||(this.setFrame("fryingpan"),this.x=this.flipX?this.scene.player.x+8:this.scene.player.x-8),this.y=this.scene.player.y-4,this.flipX=this.scene.player.flipX,this.setDepth(this.flipX?11:9),this.shootTimer+=t}shoot(){return this.scene.events.emit("sfx",this.sfx),this.shootTimer=0,this.shooting=!0,this.setData("melee",!0),this.setData("dmg",this.damage),this.setData("flip",!0),this.scene.projectileGroup.add(this),this.x=this.flipX?this.scene.player.x-16:this.scene.player.x+16,this.scene.tweens.add({targets:this,duration:70,yoyo:!1,x:this.flipX?this.scene.player.x-16:this.scene.player.x+16,callbackScope:this,onUpdate(){this.active&&(this.x=this.flipX?this.scene.player.x-16:this.scene.player.x+16)},onComplete(){if(this.active){const e=this.scene;this.shooting=!1,e.projectileGroup.remove(this),this.x=this.flipX?this.scene.player.x+8:this.scene.player.x-8}}}),this.setFrame("fryingpanattack"),0}preDestroy(){}}a.id="FRYINGPAN",t.FryingPan=a},444:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=s(63);class a extends i.Pistol{constructor(e,t,s,i="guns",a="revolver"){super(e,t,s,i,a),this.id="REVOLVER",this.sfx="revolvershoot",this.cooldown=280,this.shootTimer=280,this.recoil=200,this.damage=6,this.size=10,this.projectile={velocity:1e3,size:10,gravity:!1,key:"smgproj",anim:"projectilefast"}}shoot(){return super.shoot(!0)}}a.id="REVOLVER",t.Revolver=a},445:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=s(31);class a extends i.Gun{constructor(e,t,s,i="guns",a="rl"){super(e,t,s,i,a),this.id="ROCKETLAUNCHER",this.sfx="shoot",this.sfxRate=.5,this.cooldown=1200,this.recoil=200,this.damage=6,this.size=10,this.shootTimer=1201,this.projectile={velocity:50,size:5,gravity:!1,key:"rocket"},this.explode=((e,t,s)=>{if(e.getData("smoke").active&&s.smokeEmitter.emitters.remove(e.getData("smoke")),e.active){s.events.emit("sfx","death",.5);const t=new Phaser.Geom.Point(e.x,e.y);e.destroy();const i=s.add.image(t.x,t.y,"explosion");s.physics.world.enable(i),i.body.allowGravity=!1,i.setData("dmg",6).setData("force",7),s.explosionGroup.add(i),s.minishake(),i.setTint(Phaser.Display.Color.GetColor(0,0,0)),s.tweens.add({targets:i,duration:190,ease:"Back",yoyo:!0,scaleX:5.5,scaleY:5.5,onComplete(e,t){t[0].destroy()},onUpdate(e,t){const s=e.getValue();t.setAlpha(.16*s),s>4&&t.setTint(Phaser.Display.Color.GetColor(255,255,0)),s>5.6&&t.setTint(Phaser.Display.Color.GetColor(255,255,255))}})}}),this.projectileCollide=((e,t)=>{this.explode(e,void 0,t)}),this.enemyCollide=((e,t,s)=>{this.explode(e,t,s)}),this.body.setSize(this.size,this.size).allowGravity=!1}update(e,t){this.x=this.flipX?this.scene.player.x-3:this.scene.player.x+3,this.y=this.scene.player.y,this.flipX=this.scene.player.flipX,this.setDepth(this.flipX?11:9),this.shootTimer>this.cooldown/2&&(this.body.setAngularVelocity(0),this.setAngle(0)),this.shootTimer+=t}shoot(){this.shootTimer=0,this.scene.events.emit("sfx",this.sfx,this.sfxRate);const e=this.scene.projectileGroup.create(this.x,this.y,"projectiles",this.projectile.key).setData("dmg",this.damage).setData("onCollide",this.projectileCollide).setData("onEnemy",this.explode);e.flipX=this.flipX,e.body.setVelocityX(this.flipX?-this.projectile.velocity:this.projectile.velocity).setAccelerationX(this.flipX?-300:300).setAccelerationY(Phaser.Math.Between(-7,7)).setSize(this.projectile.size,this.projectile.size).allowGravity=this.projectile.gravity;const t=this.scene.smokeEmitter.createEmitter({frame:"smoke",angle:{min:-120,max:120},scale:{start:1.5,end:.5},alpha:{start:1,end:.5},lifespan:400,speed:{min:50,max:100},follow:e,frequency:100,quantity:3,blendMode:"MULTIPLY"});return e.setData("smoke",t),this.scene.tweens.add({targets:this,duration:75,ease:"Sine.easeInOut",yoyo:!0,angle:this.flipX?30:-30,displayOriginX:this.flipX?this.displayOriginX-5:this.displayOriginX+5}),0}}a.id="ROCKETLAUNCHER",t.RocketLauncher=a},446:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=s(31);class a extends i.Gun{constructor(e,t,s,i="guns",a="gl"){super(e,t,s,i,a),this.id="GRENADELAUNCHER",this.sfx="shoot",this.sfxRate=.5,this.cooldown=1200,this.recoil=200,this.damage=6,this.size=10,this.shootTimer=1200,this.projectile={velocity:250,size:5,gravity:!0,key:"smgproj"},this.explode=((e,t,s)=>{if(e.active){s.events.emit("sfx","death",.5);const t=new Phaser.Geom.Point(e.x,e.y);e.destroy();const i=s.add.image(t.x,t.y,"explosion");s.physics.world.enable(i),i.body.allowGravity=!1,i.setData("dmg",6).setData("force",7),s.explosionGroup.add(i),s.minishake(),i.setTint(Phaser.Display.Color.GetColor(0,0,0)),s.tweens.add({targets:i,duration:190,ease:"Back",yoyo:!0,scaleX:7,scaleY:6,onComplete(e,t){t[0].destroy()},onUpdate(e,t){const s=e.getValue();t.setAlpha(.16*s),s>5&&t.setTint(Phaser.Display.Color.GetColor(255,255,0)),s>7&&t.setTint(Phaser.Display.Color.GetColor(255,255,255))}})}}),this.projectileCollide=((e,t)=>{}),this.enemyCollide=((e,t,s)=>{this.explode(e,t,s)}),this.body.setSize(this.size,this.size).allowGravity=!1}update(e,t){this.x=this.flipX?this.scene.player.x-8:this.scene.player.x+8,this.y=this.scene.player.y,this.flipX=this.scene.player.flipX,this.setDepth(this.flipX?11:9),this.shootTimer>this.cooldown/2&&(this.body.setAngularVelocity(0),this.setAngle(0)),this.shootTimer+=t}shoot(){this.shootTimer=0,this.scene.events.emit("sfx",this.sfx,this.sfxRate);const e=this.scene.projectileGroup.create(this.x,this.y,"projectiles","smgproj").setData("dmg",this.damage).setData("onCollide",this.projectileCollide).setData("onEnemy",this.explode);return e.body.setVelocityX(this.flipX?-this.projectile.velocity:this.projectile.velocity).setDragX(190).setVelocityY(-170).setFrictionX(1e3).setSize(this.projectile.size,this.projectile.size).setBounce(1,.5).allowGravity=this.projectile.gravity,this.scene.tweens.add({targets:this,duration:75,ease:"Sine.easeInOut",yoyo:!0,angle:this.flipX?30:-30,displayOriginX:this.flipX?this.displayOriginX-5:this.displayOriginX+5}),this.scene.time.addEvent({delay:1e3,callback:this.explode,callbackScope:this.scene,args:[e,void 0,this.scene],loop:!1}),0}}a.id="GRENADELAUNCHER",t.GrenadeLauncher=a},447:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=s(209);t.Player=class extends Phaser.GameObjects.Sprite{constructor(e,t,s,i,a){super(e,t,s,i),this.runSpeed=100,this.knockback=0,this.jumpTimer=0,this.shootTimer=0,this.walkSfxTimer=0,this.isShooting=!1,this.isJumping=!1,this.isFalling=!1,this.keys=this.scene.keys,this.scene.physics.world.enable(this),this.scene.physics.add.collider(this,a),this.body.setSize(11,16).setCollideWorldBounds(!1),this.setDepth(10),this.resetGun(t,s)}update(e,t){this.inputs={left:this.keys.left.isDown||this.scene.touchControls.left,right:this.keys.right.isDown||this.scene.touchControls.right,jump:this.keys.up.isDown||this.keys.space.isDown||this.scene.touchControls.up,shoot:this.keys.down.isDown||this.keys.X.isDown||this.scene.touchControls.shoot},this.y>400?this.scene.restart():(this.body.onFloor()&&this.isFalling&&(this.isFalling=!1,this.scene.events.emit("sfx","foley")),this.isFalling=this.body.velocity.y>50,this.updateGun(e,t),this.animation(e,t),this.controls(e,t),this.body.setFrictionY(1e3),this.shootTimer+=t,this.walkSfxTimer+=t)}resetGun(e,t){this.gun&&(this.gun.preDestroy(),this.gun.destroy()),this.gun=i.GunFactory.createDefaultGun(this.scene,e+8,t),this.scene.physics.world.enable(this),this.scene.add.existing(this.gun)}updateGun(e,t){this.gun.update(e,t)}changeGun(){this.gun.destroy(),this.gun=i.GunFactory.createRandomGun(this.scene,this.x,this.y),this.scene.add.existing(this.gun),this.scene.flashGunName(this.gun.id)}nextGun(){this.gun.destroy(),this.gun=i.GunFactory.getNextGun(this.scene,this.x,this.y,this.gun),this.scene.add.existing(this.gun),this.scene.flashGunName(this.gun.id)}controls(e,t){this.inputs.shoot?this.gun.shootTimer>this.gun.cooldown&&(this.knockback=this.shoot(),this.knockback||(this.knockback=0)):(this.gun.unShoot(),this.knockback=0),this.inputs.left&&!this.inputs.right?(this.body.setVelocityX(-this.runSpeed+this.knockback),this.walkSfxTimer>150&&this.body.onFloor()&&this.walkSfx(),this.flipX=!0):this.inputs.right&&!this.inputs.left?(this.body.setVelocityX(this.runSpeed+this.knockback),this.walkSfxTimer>150&&this.body.onFloor()&&this.walkSfx(),this.flipX=!1):this.body.setVelocityX(this.knockback),this.inputs.jump?this.body.onFloor()&&0===this.jumpTimer?(this.jumpTimer=1,this.body.setVelocityY(-150),this.scene.events.emit("sfx","jump")):this.jumpTimer>0&&this.jumpTimer<301&&!this.body.onCeiling()?(this.jumpTimer+=t,this.body.setVelocityY(-150)):this.body.onCeiling()&&(this.scene.events.emit("sfx","foley"),this.jumpTimer=301):this.jumpTimer=0}jump(){this.body.onFloor()&&0===this.jumpTimer&&(this.jumpTimer=1,this.body.setVelocityY(-150))}animation(e,t){let s;s=0!==this.body.velocity.y?"jump":this.isShooting?"shoot":0!==this.body.velocity.x&&(this.inputs.left||this.inputs.right)?"run":"stand",this.anims.getCurrentKey()!==s&&this.anims.play(s)}shoot(){return this.gun.shoot()}walkSfx(){this.body.onFloor()&&(this.scene.events.emit("sfx","walk"),this.walkSfxTimer=0)}}},448:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=s(99);t.Drone=class extends i.Enemy{constructor(e,t,s,i){super(e,t,s,i,"enemies"),this.dir=i,this.baseVel=50,this.madVel=70,this.vel=50,this.baseAccel=70,this.madAccel=100,this.accel=70,this.baseHealth=6,this.health=6,this.isFirst=!0,this.canDamage=!0,this.isMad=!1,this.animWalk="drone",this.animMad="dronemad",this.isMoving=!1,this.goingToPit=!1,this.getOutOfTopY=60,this.getOutOfTopX1=300,this.getOutOfTopX2=100}firstUpdate(){this.anims.play(this.animWalk),this.body.setBounce(1,1.5).setSize(16,12).allowGravity=!1,this.isFirst=!1}update(e,t){if(this.isFirst&&this.firstUpdate(),!this.isDead&&(this.flipX=this.scene.player.x<this.x,this.y>240&&(this.isMoving=!1,this.goingToPit=!1,this.isMad=!0,this.smoke=this.scene.smokeEmitter.createEmitter({frame:"smoke",angle:{min:-120,max:120},scale:{start:1.5,end:.5},alpha:{start:1,end:.5},lifespan:400,speed:{min:50,max:100},follow:this,frequency:100,quantity:3,blendMode:"MULTIPLY"}),this.y=-5,this.x=200,this.health=this.baseHealth,this.vel=this.madVel,this.accel=this.madAccel,this.scene.minishake(),this.anims.play("dronemad"),this.scene.events.emit("sfx","enemyloop")),this.y>176&&this.x>186&&this.x<206&&!this.goingToPit&&(this.isMoving=!0,this.goingToPit=!0,this.body.setVelocity(0,5),this.anims.currentAnim.resume(),this.scene.time.addEvent({delay:1e3,callback:()=>{this.scene.physics.moveTo(this,200,241,20)}})),!this.isMoving&&!this.goingToPit)){this.isMoving=!0;let e=200,t=240;Phaser.Math.Distance.Between(this.x,this.y,this.scene.player.x,this.scene.player.y)<Phaser.Math.Distance.Between(this.x,this.y,120,400)-180&&this.y<170?(e=this.scene.player.x,t=this.scene.player.y-16):this.y>80&&this.y<160&&(e=1!==this.dir?Phaser.Math.Between(40,60):Phaser.Math.Between(310,350)),this.y<this.getOutOfTopY&&this.x<this.getOutOfTopX1&&this.x>this.getOutOfTopX2&&(t=40,e=1===this.dir?Phaser.Math.Between(20,60):Phaser.Math.Between(310,350)),this.scene.physics.accelerateTo(this,e,t,this.accel,this.vel,this.vel),this.moveEvent=this.scene.time.addEvent({delay:Phaser.Math.Between(1500,2e3),callbackScope:this,callback:()=>{this.setFrame(this.isMad?"dronemad01":"drone01"),this.anims.currentAnim.pause(),this.body.setAcceleration(0,0).setVelocity(this.body.velocity.x/3,5),this.scene.time.addEvent({delay:Phaser.Math.Between(2e3,3e3),callbackScope:this,callback:e=>{this.anims.currentAnim.resume(),this.isMoving=!1}})}})}}}},449:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=s(99);t.BigRobot=class extends i.Enemy{constructor(e,t,s,i){super(e,t,s,i,"benemies"),this.baseVel=70,this.madVel=90,this.vel=70,this.baseHealth=12,this.health=12,this.isFirst=!0,this.falling=!1,this.killAt=0,this.canDamage=!0,this.isMad=!1,this.animWalk="bigwalk",this.animMad="bigwalkmad"}}},450:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=s(99);t.SmallRobot=class extends i.Enemy{constructor(e,t,s,i){super(e,t,s,i,"enemies"),this.baseVel=90,this.madVel=120,this.vel=90,this.health=6,this.isFirst=!0,this.falling=!1,this.killAt=0,this.canDamage=!0,this.isMad=!1,this.animWalk="enemywalk",this.animMad="enemywalkmad"}}},451:function(e,t,s){"use strict";function i(e){for(var s in e)t.hasOwnProperty(s)||(t[s]=e[s])}Object.defineProperty(t,"__esModule",{value:!0}),i(s(99)),i(s(450)),i(s(449)),i(s(448))},452:function(e,t,s){"use strict";var i;Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.BIG="BIG",e.NORMAL="NORMAL",e.DRONE="DRONE",e.NORMALDUO="NORMALDUO",e.NORMALWAVE="NORMALWAVE",e.NONE="NONE"}(i=t.EnemySpawn||(t.EnemySpawn={}));const a=[{weight:.7,event:i.NORMAL},{weight:.2,event:i.NORMALDUO},{weight:.1,event:i.DRONE}],o=[{weight:.5,event:i.NORMAL},{weight:.2,event:i.NORMALDUO},{weight:.1,event:i.DRONE},{weight:.2,event:i.BIG}],h=[{weight:.4,event:i.NORMAL},{weight:.1,event:i.NORMALDUO},{weight:.1,event:i.NORMALWAVE},{weight:.3,event:i.BIG},{weight:.1,event:i.DRONE}],n=[{weight:.3,event:i.NORMAL},{weight:.1,event:i.NORMALWAVE},{weight:.35,event:i.BIG},{weight:.15,event:i.DRONE}],r=[{weight:.25,event:i.NORMALDUO},{weight:.25,event:i.NORMALWAVE},{weight:.25,event:i.BIG},{weight:.25,event:i.DRONE}],l=[{weight:1,event:i.NORMALWAVE}];t.difficulties={0:a,1:o,2:h,3:n,4:r,5:l},t.getRandomEnemySpawnEvent=function(e){const s=t.difficulties[e],i=Math.random();let a=0;const o=s.length-1;for(let e=0;e<o;++e)if(i<(a+=s[e].weight))return s[e].event;return s[o].event}},453:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=s(210),a=s(452),o=s(451),h=s(447);t.CrateboxScene=class extends Phaser.Scene{constructor(){super({key:"CrateboxScene"}),this.paused=!0,this.sleepTimer=0,this.cameraShakeTimer=0,this.debugTimer=300,this.difficulty=0,this.enemySpawnTimer=2e3,this.enemySpawnTime=5e3,this.enemySpawnCounter=1,this.score=0,this.gunTextTimer=1001,this.bestScore=0,this.starCoords=[{x:200,y:120},{x:200,y:200},{x:50,y:60},{x:50,y:160},{x:350,y:60},{x:350,y:160}],this.lastRoll=1,this.toggleTouch=(()=>{this.touchControls.visible=!this.touchControls.visible,this.touchControls.visible?this.touchControls.buttons.forEach(e=>e.setAlpha(0)):this.touchControls.buttons.forEach(e=>e.setAlpha(.6))}),this.starGet=((e,t)=>{const s=this.getStarPosition();e.body.x=s.x-8,e.body.y=s.y-8,this.star.setX(s.x),this.star.setY(s.y),this.music.isPlaying||this.restartMusic(),this.score+=1,this.scoreText.setText(this.score.toString()),this.score>this.bestScore&&(this.bestScore=this.score,this.bestScoreDisplay.setText(this.bestScore.toString()+" !"),this.bestScoreDisplay.setDisplayCallback(e=>(e.x=Phaser.Math.Between(e.x-.1,e.x+.1),e.y=Phaser.Math.Between(e.y-.1,e.y+.1),e))),this.score%10==0?this.events.emit("sfx","starget_alt"):this.events.emit("sfx","starget"),this.player.changeGun(),this.setEnemySpawnTime()}),this.$spawnEnemy=(()=>{const e=a.getRandomEnemySpawnEvent(this.difficulty);e===a.EnemySpawn.NORMAL?this.spawnEnemy():e===a.EnemySpawn.NORMALDUO?this.spawnEnemySquad():e===a.EnemySpawn.BIG?this.spawnEnemy(!0):e===a.EnemySpawn.NORMALWAVE?this.spawnEnemyWave():e===a.EnemySpawn.DRONE&&this.spawnDrone()}),this.spawnEnemy=((e=!1)=>{e?this.enemyGroup.add(new o.BigRobot(this,200,0,Math.floor(2*Math.random())),!0):this.enemyGroup.add(new o.SmallRobot(this,200,0,Math.floor(2*Math.random())),!0),this.enemySpawnTimer=this.enemySpawnTime,this.enemySpawnCounter+=1}),this.spawnDrone=((e=200,t=0)=>{this.enemyGroup.add(new o.Drone(this,e,t,Math.floor(2*Math.random())),!0),this.enemySpawnTimer=this.enemySpawnTime,this.enemySpawnCounter+=1}),this.enemyExplode=((e,t)=>{if(t.canDamage){this.events.emit("sfx","enemyshot",2);let s=!0,i=1;e.x<t.x&&(s=!1),e.getData("force")&&(i=e.getData("force")),e.getData("onEnemy")&&e.getData("onEnemy")(e,t),t.damage(e.getData("dmg"),s,i)}}),this.enemyShot=((e,t)=>{if(t.canDamage||e.getData("bypass")){const s=this;s.sys.sound.playAudioSprite("sfx","enemyshot");let i=!0,a=!1,o=1;e.x<t.x&&(i=!1),i&&t.body.velocity.x>0&&e.getData("flip")?a=!0:!i&&t.body.velocity.x<0&&e.getData("flip")&&(a=!0),e.getData("force")&&(o=e.getData("force")),t.damage(e.getData("dmg"),i,o,a),e.getData("onEnemy")&&e.getData("onEnemy")(e,t,s),e.getData("melee")||e.destroy()}}),this.enemyHit=((e,t)=>{this.restart()}),this.projExplosionOverlap=((e,t)=>{e.getData("inExplosion")&&e.getData("inExplosion")(e,void 0,this)})}create(){window.toggleTouch=this.toggleTouch.bind(this),window.togglePause=this.togglePause.bind(this),this.events.on("sfx",(e,t)=>this.sound.playAudioSprite("sfx",e,{rate:t})),this.music=this.sound.add("bgm"),this.bestScore=parseInt(window.localStorage.getItem("bestScore"),10),isNaN(this.bestScore)&&(this.bestScore=0),this.cameras.main.roundPixels=!0,this.physics.world.drawDebug=!1,this.pauseText=this.add.bitmapText(145,69,"mario","P A U S E D !").setDepth(100),this.pauseText.setVisible(!1),this.gunText=this.add.dynamicBitmapText(100,165,"mario","").setDepth(100),this.gunText.letterSpacing=3,this.gunText.setDisplayCallback(e=>(e.x=Phaser.Math.Between(e.x-.1,e.x+.1),e.y=Phaser.Math.Between(e.y-.1,e.y+.1),e)),this.scoreDisplay=this.add.bitmapText(21,5,"mario","* SCORE").setDepth(100),this.bestScoreText=this.add.bitmapText(316,5,"mario","BEST").setDepth(100),this.scoreText=this.add.bitmapText(100,5,"mario",this.score.toString()).setDepth(100),this.bestScoreDisplay=this.add.dynamicBitmapText(361,5,"mario",this.bestScore.toString()).setDepth(100),this.enemySpawnTimeDebug=this.add.bitmapText(5,214,"mario",Math.floor(this.enemySpawnTimer/100).toString()).setDepth(100),this.enemySpawnTimeDebug.setVisible(!1),this.map=this.make.tilemap({key:"cratebox"}),this.tileset=this.map.addTilesetImage("cratebox","cratebox",16,16),this.groundLayer=this.map.createStaticLayer("groundLayer",this.tileset,0,0),this.groundLayer.setCollisionByProperty({collide:!0}),this.smokeEmitter=this.add.particles("projectiles"),this.setupTouch(),this.keys=this.input.keyboard.createCursorKeys(),this.keys.X=this.input.keyboard.addKey(Phaser.Input.Keyboard.KeyCodes.X),this.projectileGroup=this.add.group({createCallback:e=>this.physics.world.enable(e)}),this.explosionGroup=this.add.group({createCallback:e=>this.physics.world.enable(e)}),this.enemyGroup=this.physics.add.group(),this.killedEnemies=this.physics.add.group(),this.initPlayer(),this.physics.add.collider(this.enemyGroup,this.groundLayer),this.physics.add.overlap(this.enemyGroup,this.player,this.enemyHit),this.physics.add.overlap(this.projectileGroup,this.explosionGroup,this.projExplosionOverlap),this.physics.add.overlap(this.projectileGroup,this.player,(e,t)=>{e.active&&e.getData("onPlayer")&&e.getData("onPlayer")(e,t,this)}),this.physics.add.overlap(this.projectileGroup,this.enemyGroup,this.enemyShot,void 0,this),this.physics.add.overlap(this.explosionGroup,this.enemyGroup,this.enemyExplode),this.physics.add.collider(this.projectileGroup,this.groundLayer,e=>{e.active&&e.getData("onCollide")&&e.getData("onCollide")(e,this)},void 0,this),this.input.keyboard.on("keyup",e=>{"p"===e.key&&this.togglePause()}),this.input.keyboard.on("keyup",e=>{"m"===e.key&&(this.sound.mute?this.sound.mute=!1:this.sound.mute=!0)}),this.input.keyboard.on("keyup",e=>{"3"===e.key?(this.physics.world.drawDebug=!this.physics.world.drawDebug,this.physics.world.drawDebug?(this.enemySpawnEventDebug.setVisible(!0),this.physics.world.debugGraphic.setVisible(!0)):(this.enemySpawnEventDebug.setVisible(!1),this.physics.world.debugGraphic.setVisible(!1))):"4"===e.key?(window.localStorage.setItem("bestScore","0"),this.bestScore=0,this.bestScoreDisplay.setText("0")):"5"===e.key?console.log(this):"t"===e.key||"6"===e.key||"y"===e.key||("w"===e.key?this.player.changeGun():"r"===e.key&&this.player.nextGun())}),this.spawnStar(),this.input.on("pointerup",e=>{this.spawnDrone(e.x,e.y)},this),this.enemySpawnEvent=this.time.addEvent({delay:2e3,loop:!0,callback:this.$spawnEnemy,callbackScope:this}),this.enemySpawnEventDebug=this.add.bitmapText(5,214,"mario",this.enemySpawnEvent.getElapsed().toString()),this.enemySpawnEventDebug.setVisible(!1),this.enemySpawnEventDebug.setDepth(100)}update(e,t){this.paused?this.pause():(this.enemySpawnEventDebug.setText((this.enemySpawnEvent.delay/1e3).toFixed(1).toString()+" "+((this.enemySpawnEvent.delay-this.enemySpawnEvent.getElapsed())/1e3).toFixed(1).toString()),this.gunTextTimer>2500&&this.gunText.setVisible(!1),this.cameraShakeTimer-=t,this.debugTimer-=t,this.enemySpawnTimer-=t,this.gunTextTimer+=t,this.cameraShakeTimer<0?(this.cameras.main.x=0,this.cameras.main.y=0,this.cameras.main.setRotation(0)):this.minishake(!1),this.keys.shift.isDown&&this.debugTimer<0&&(this.spawnEnemy(!0),this.debugTimer=300),this.player.update(e,t),this.enemyGroup.children.entries.forEach(s=>s.update(e,t),this),this.killedEnemies.children.entries.forEach(s=>s.update(e,t),this),this.projectileGroup.children.entries.forEach(s=>s.active&&s.update?s.update(e,t):i.noop()))}togglePause(){this.paused?(this.scene.resume("CrateboxScene"),this.sound.resumeAll(),this.sys.sound.playAudioSprite("sfx","pause"),this.paused=!1):(this.scene.pause("CrateboxScene"),this.sound.pauseAll(),this.paused=!0),this.pauseText.setVisible(this.paused)}setupTouch(){const e=this.add.sprite(370,210,"dir"),t=this.add.sprite(310,210,"shoot"),s=this.add.sprite(30,210,"dir"),i=this.add.sprite(90,210,"dir");e.setAngle(-90).setInteractive(),e.setAlpha(.6).setInteractive(),t.setAlpha(.6).setInteractive(),s.setAlpha(.6).setInteractive(),i.setAlpha(.6).setInteractive(),s.flipX=!0,this.touchControls={visible:!1,buttons:[e,t,s,i],left:!1,right:!1,up:!1,shoot:!1},e.on("pointerdown",e=>{this.touchControls.up=!0}),e.on("pointerup",e=>{this.touchControls.up=!1}),t.on("pointerdown",e=>{this.touchControls.shoot=!0}),t.on("pointerup",e=>{this.touchControls.shoot=!1}),s.on("pointerdown",e=>{this.touchControls.left=!0,this.touchControls.right=!1}),s.on("pointerup",e=>{this.touchControls.left=!1}),i.on("pointerdown",e=>{this.touchControls.right=!0,this.touchControls.left=!1}),i.on("pointerup",e=>{this.touchControls.right=!1}),this.toggleTouch()}pause(){this.scene.pause("CrateboxScene"),this.sound.pauseAll(),this.paused=!0,this.pauseText.setVisible(this.paused)}unpause(){this.scene.resume("CrateboxScene"),this.sound.resumeAll(),this.paused=!1,this.pauseText.setVisible(this.paused)}initPlayer(){this.player=new h.Player(this,200,152,"player-sprites",this.groundLayer),this.player.anims.play("stand"),this.add.existing(this.player)}spawnStar(){this.star&&this.star.destroy();const e=this.getStarPosition();this.star=this.make.sprite({scene:this,key:"star",x:e.x,y:e.y}),this.physics.world.enable(this.star,Phaser.Physics.Arcade.STATIC_BODY),this.physics.add.overlap(this.star,this.player,this.starGet)}getStarPosition(){const e=Math.floor(Math.random()*this.starCoords.length);return e!==this.lastRoll?(this.lastRoll=e,this.starCoords[e]):this.getStarPosition()}setEnemySpawnTime(){this.score>=10&&this.score<20?this.difficulty=1:this.score>=20&&this.score<35?this.difficulty=2:this.score>=35&&this.score<50?this.difficulty=3:this.score>=50&&this.score<100?this.difficulty=3:this.score>=100&&(this.difficulty=4,this.enemySpawnTime=1500)}spawnEnemySquad(e=2){const t=[];let s=1;for(let i=0;i<e;i++)t.push(new o.SmallRobot(this,200,0,s)),s=1===s?2:1;this.enemyGroup.addMultiple(t,!0),this.enemySpawnCounter+=1,this.enemySpawnTimer=this.enemySpawnTime}spawnEnemyWave(){const e=Math.floor(2*Math.random());this.time.addEvent({delay:300,repeat:2,callbackScope:this,callback(){this.enemyGroup.add(new o.SmallRobot(this,200,0,e),!0)}})}minishake(e=!0){const t=Phaser.Math.Between(-2,2),s=Phaser.Math.Between(-2,2);this.cameras.main.x=t,this.cameras.main.y=s,e&&(this.cameraShakeTimer=150)}flashGunName(e){this.gunText.setText(i.center(e+"!",18)).setVisible(!0),this.gunTextTimer=0}restart(){this.enemySpawnEvent.destroy(),this.enemySpawnEvent=this.time.addEvent({delay:2e3,loop:!0,callback:this.$spawnEnemy,callbackScope:this}),this.smokeEmitter.emitters.destroy(),this.difficulty=0,this.enemySpawnTimer=5e3,this.enemySpawnTime=5e3,this.sys.sound.playAudioSprite("sfx","death"),this.cameras.main.shake(200),this.cameras.main.flash(200,1,0,0),this.score=0,this.lastRoll=1,this.spawnStar(),this.scoreText.setText(this.score.toString()),this.bestScoreDisplay.setText(this.bestScore.toString()),this.bestScoreDisplay.setDisplayCallback(e=>e),this.enemyGroup.clear(!0),this.projectileGroup.clear(!0),this.killedEnemies.clear(!0),this.player.x=200,this.player.y=140,this.player.body.setVelocity(0,0),this.player.resetGun(this.player.x,this.player.y),window.localStorage.setItem("bestScore",this.bestScore.toString()),this.music.stop()}restartMusic(){this.music.stop(),this.music.play("",{loop:!0,volume:.3})}}},454:function(e,t,s){e.exports=s.p+"assets/sfx.74e65b3f69ce7eb1b7b169b156cbb2ac.json"},455:function(e,t,s){e.exports=s.p+"assets/sfx.b2d86d1f673edd836abec2bcaba165bf.ogg"},456:function(e,t,s){e.exports=s.p+"assets/sfx.9f5f64d363a2c643f6a6c3e2e99ad272.mp3"},457:function(e,t,s){e.exports=s.p+"assets/bgm1.92a9c448a7aed5f0f63671d7173ccf99.ogg"},458:function(e,t,s){e.exports=s.p+"assets/bgm1.48821b86cd7bb0283671f5adc60cca63.mp3"},459:function(e,t,s){e.exports=s.p+"assets/font.39107774924994f343c6d68a111f68ef.fnt"},460:function(e,t,s){e.exports=s.p+"assets/font.95d741a12b1e9c537a9943fd701c7809.png"},461:function(e,t,s){e.exports=s.p+"assets/shoot.af7528794d9ca8c487f184ecee9b4f45.png"},462:function(e,t,s){e.exports=s.p+"assets/dir.c9f42b9ee5f23ea09a276f6061f3894f.png"},463:function(e,t,s){e.exports=s.p+"assets/shotgunproj.b3da19b25c093f131bc6e0d103064228.png"},464:function(e,t,s){e.exports=s.p+"assets/shotgun.8caba54ffe708471ad8679608c636753.png"},465:function(e,t,s){e.exports=s.p+"assets/smgproj.b71582dbda87496081e59f39f9e9a888.png"},466:function(e,t,s){e.exports=s.p+"assets/smg.e882a63e76684402b5170a1f2c3748b0.png"},467:function(e,t,s){e.exports=s.p+"assets/projectile.75f44b45de87f3d9160da249e2016dd9.png"},468:function(e,t,s){e.exports=s.p+"assets/dualgun.1f16723ab6892d3a75e495532a9d2dc9.png"},469:function(e,t,s){e.exports=s.p+"assets/minigun.7f57d60bb4e2fa4227667564af86d2f5.png"},470:function(e,t,s){e.exports=s.p+"assets/gun.e02f36cb9ca77ffbfa87f0efbeed892b.png"},471:function(e,t,s){e.exports=s.p+"assets/star.e14d905c336a76b661ea5941af0e553c.png"},472:function(e,t,s){e.exports=s.p+"assets/enemy.a783fa21cfde60734f5937b0ae2c90c1.png"},473:function(e,t,s){e.exports=s.p+"assets/projectiles.2ac6897fb775eaab07e4ce5207e7d4b2.json"},474:function(e,t,s){e.exports=s.p+"assets/projectiles.7aa3e1b698cbeaceb14fc9af02820760.png"},475:function(e,t,s){e.exports=s.p+"assets/guns.45fbfd6bf813018e96d14282716e86c0.json"},476:function(e,t,s){e.exports=s.p+"assets/guns.819ba74c14c8c86c0e8254db68c34bf5.png"},477:function(e,t,s){e.exports=s.p+"assets/bigenemies.938ee409fa3e948e3b54ea5c3576b874.json"},478:function(e,t,s){e.exports=s.p+"assets/bigenemies.17c17ed7fe273a8102a08a65efd21bad.png"},479:function(e,t,s){e.exports=s.p+"assets/enemies.962829fb4ccd81c6c1ab80d62f9fdfe4.json"},480:function(e,t,s){e.exports=s.p+"assets/enemies.d1f4d970e78185235b68a4756aaec5b9.png"},481:function(e,t,s){e.exports=s.p+"assets/player.a3c5986f9f9d7dd28c6829aed37240ff.json"},482:function(e,t,s){e.exports=s.p+"assets/player.c802757a0d546e7bdd978c034313467e.png"},483:function(e,t,s){e.exports=s.p+"assets/player.9ac1360dd7babca8709df4559e4c88bc.png"},484:function(e,t,s){e.exports=s.p+"assets/16x16.6c7f1a8f10d416f80306cdd290f7483f.png"},485:function(e,t,s){e.exports=s.p+"assets/cratebox.941244e54d010e349bc3d73efc4ff0c3.json"},486:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=s(485),a=s(484),o=s(483),h=s(482),n=s(481),r=s(480),l=s(479),c=s(478),p=s(477),d=s(476),y=s(475),m=s(474),u=s(473),f=s(472),g=s(471),x=s(470),b=s(469),v=s(468),w=s(467),k=s(466),j=s(465),S=s(464),D=s(463),T=s(462),G=s(461),P=s(460),E=s(459),M=s(458),C=s(457),O=s(456),X=s(455),A=s(454);t.BootScene=class extends Phaser.Scene{constructor(){super({key:"Boot"})}preload(){this.load.tilemapTiledJSON("cratebox",i).spritesheet("cratebox",a,{frameWidth:64,frameHeight:64}).spritesheet("player",o,{frameWidth:16,frameHeight:16}).atlas("player-sprites",h,n).atlas("enemies",r,l).atlas("benemies",c,p).atlas("guns",d,y).atlas("projectiles",m,u).spritesheet("enemy",f,{frameWidth:16,frameHeight:16}).spritesheet("star",g,{frameWidth:16,frameHeight:16}).spritesheet("projectile",w,{frameWidth:16,frameHeight:16}).spritesheet("smgproj",j,{frameWidth:16,frameHeight:16}).spritesheet("shotgunproj",D,{frameWidth:16,frameHeight:16}).spritesheet("dualgun",v,{frameWidth:48,frameHeight:16}).spritesheet("gun",x,{frameWidth:16,frameHeight:16}).spritesheet("minigun",b,{frameWidth:17,frameHeight:17}).spritesheet("smg",k,{frameWidth:16,frameHeight:16}).spritesheet("dir",T,{frameWidth:60,frameHeight:60}).spritesheet("shoot",G,{frameWidth:60,frameHeight:60}).spritesheet("shotgun",S,{frameWidth:16,frameHeight:16}).bitmapFont("mario",P,E).audio("bgm",[M,C]).audioSprite("sfx",A,[O,X])}create(){const e=this.make.graphics({x:0,y:0,add:!1});e.fillStyle(Phaser.Display.Color.GetColor(255,255,255),1),e.fillCircle(10,10,10),e.generateTexture("explosion",20,20);const t={key:"stand",defaultTextureKey:"player",frames:this.anims.generateFrameNames("player-sprites",{start:2,end:2,suffix:".png",zeroPad:2})},s={key:"jump",repeat:-1,defaultTextureKey:"player",repeatDelay:0,frameRate:15,frames:this.anims.generateFrameNames("player-sprites",{start:4,end:7,suffix:".png",zeroPad:2})},i={key:"shoot",duration:5,defaultTextureKey:"player",frames:this.anims.generateFrameNames("player-sprites",{start:8,end:8,suffix:".png",zeroPad:2})};this.anims.create(t),this.anims.create({key:"walk",defaultTextureKey:"player",frameRate:15,repeat:-1,repeatDelay:0,yoyo:!1,frames:[{key:"player-sprites",frame:"01.png"},{key:"player-sprites",frame:"03.png"}]}),this.anims.create({key:"run",defaultTextureKey:"player",frameRate:15,repeat:-1,yoyo:!0,frames:[{key:"player-sprites",frame:"09.png"},{key:"player-sprites",frame:"010.png"},{key:"player-sprites",frame:"011.png"},{key:"player-sprites",frame:"010.png"}]}),this.anims.create(s),this.anims.create(i),this.anims.create({key:"drone",frameRate:10,repeat:-1,frames:this.anims.generateFrameNames("enemies",{start:1,end:2,zeroPad:2,prefix:"drone"})}),this.anims.create({key:"dronemad",frameRate:20,repeat:-1,frames:this.anims.generateFrameNames("enemies",{start:1,end:2,zeroPad:2,prefix:"dronemad"})}),this.anims.create({key:"bigwalkmad",frameRate:20,repeat:-1,yoyo:!0,frames:this.anims.generateFrameNames("benemies",{start:0,end:2,zeroPad:2,prefix:"bigmad"})}),this.anims.create({key:"bigwalk",frameRate:15,repeat:-1,yoyo:!0,frames:this.anims.generateFrameNames("benemies",{start:0,end:2,zeroPad:2,prefix:"big"})}),this.anims.create({key:"enemywalk",frameRate:15,repeat:-1,frames:this.anims.generateFrameNames("enemies",{start:0,end:1,zeroPad:2})}),this.anims.create({key:"enemywalkmad",frameRate:20,repeat:-1,frames:this.anims.generateFrameNames("enemies",{start:0,end:1,zeroPad:2,prefix:"mad"})}),this.anims.create({key:"fpattack",frameRate:15,frames:[{key:"guns",frame:"fryingpanattack"},{key:"guns",frame:"fryingpan"}]}),this.anims.create({key:"projectile",duration:100,frames:[{key:"projectiles",frame:"projectile"},{key:"projectiles",frame:"smgproj"}]}),this.anims.create({key:"projectilefast",duration:100,frameRate:32,frames:[{key:"projectiles",frame:"projectile"},{key:"projectiles",frame:"smgproj"}]}),this.anims.create({key:"disc",repeat:-1,frameRate:24,frames:[{key:"projectiles",frame:"disc00"},{key:"projectiles",frame:"disc01"}]}),this.anims.create({key:"fire",repeat:-1,frames:[{key:"projectiles",frame:"fire00"},{key:"projectiles",frame:"fire01"},{key:"projectiles",frame:"fire02"}]}),this.scene.start("CrateboxScene")}update(e,t){}}},63:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=s(31);class a extends i.Gun{constructor(e,t,s,i="guns",a="gun"){super(e,t,s,i,a),this.id="PISTOL",this.sfx="pistolshoot",this.cooldown=200,this.shootTimer=200,this.recoil=200,this.damage=3,this.size=10,this.canShoot=!0,this.released=!0,this.projectile={velocity:600,size:10,gravity:!1,key:"smgproj",anim:"projectile"},this.projectileCollide=((e,t)=>{t.events.emit("sfx","foley"),e.destroy()}),this.body.setSize(this.size,this.size).allowGravity=!1}update(e,t){this.x=this.flipX?this.scene.player.x-8:this.scene.player.x+8,this.y=this.scene.player.y,this.flipX=this.scene.player.flipX,this.setDepth(this.flipX?11:9),this.shootTimer+=t}shoot(e=!1){if(this.canShoot){e&&this.scene.minishake();const t=this.flipX?this.x-8:this.x+8;this.canShoot=!1,this.released=!1,this.scene.events.emit("sfx",this.sfx,Phaser.Math.FloatBetween(.7,1));const s=this.scene.projectileGroup.create(t,this.y,"projectiles",this.projectile.key).setData("dmg",this.damage).setData("onCollide",this.projectileCollide);s.anims.play(this.projectile.anim),s.body.setVelocityX(this.flipX?-this.projectile.velocity:this.projectile.velocity).setSize(this.projectile.size,this.projectile.size).allowGravity=this.projectile.gravity,this.scene.time.addEvent({delay:this.cooldown,callbackScope:this,callback(){this.active&&this.released&&(this.canShoot=!0)}}),this.scene.tweens.add({targets:this,duration:100,ease:"Sine.easeIn",yoyo:!0,angle:this.flipX?70:-70,callbackScope:this,onComplete(){this.setAngle(0)}}),this.shootTimer=0}else this.scene.time.addEvent({delay:this.cooldown,callbackScope:this,callback(){this.active&&this.released&&(this.canShoot=!0)}});return 0}unShoot(){this.released=!0}}a.id="PISTOL",t.Pistol=a},99:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Enemy=class extends Phaser.GameObjects.Sprite{constructor(e,t,s,i,a){super(e,t,s,a),this.dir=i,this.baseHealth=6,this.health=6,this.isFirst=!0,this.falling=!1,this.killAt=0,this.isDead=!1,this.canDamage=!0,this.isMad=!1,this.scene.physics.world.enable(this)}firstUpdate(){this.anims.play(this.animWalk),this.vel=1===this.dir?-this.baseVel:this.baseVel,this.body.setVelocityX(this.vel).setBounceY(.2),this.setDepth(100),this.isFirst=!1}update(e,t){this.isFirst&&this.firstUpdate(),this.flipX=this.body.velocity.x<0,0===this.body.velocity.x&&(this.vel=-this.vel,this.body.setVelocityX(this.vel)),this.body.onFloor()&&this.falling&&this.scene.sys.sound.playAudioSprite("sfx","foley",{volume:.3}),this.falling=this.body.velocity.y>50,this.isDead||this.y>400&&(this.smoke=this.scene.smokeEmitter.createEmitter({frame:"smoke",angle:{min:-120,max:120},scale:{start:1.5,end:.5},alpha:{start:1,end:.5},lifespan:400,speed:{min:50,max:100},follow:this,frequency:100,quantity:3,blendMode:"MULTIPLY"}),this.y=-5,this.x=200,this.body.velocity.x>0?(this.vel=-this.madVel,this.body.setVelocityX(-this.madVel)):(this.vel=this.madVel,this.body.setVelocityX(this.madVel)),this.health=this.baseHealth,this.scene.minishake(),this.anims.play(this.animMad),this.scene.events.emit("sfx","enemyloop"))}damage(e=0,t,s=2,i=!1){this.canDamage=!1,this.health-=e,this.setTint(Phaser.Display.Color.GetColor(255,0,0)),this.setScale(1,1),i&&this.flip(),this.health<=0?this.die(t,s):this.scene.tweens.add({targets:this,duration:70,scaleY:.7,yoyo:!0,onComplete:()=>{this.setTint(Phaser.Display.Color.GetColor(255,255,255)),this.setScale(1,1),this.canDamage=!0}})}flip(){this.body.setVelocityX(-this.body.velocity.x)}die(e,t=1){this.isDead=!0,this.body.allowGravity=!0,this.scene.minishake(),this.scene.events.emit("sfx","enemykill"),this.scene.enemyGroup.remove(this),this.scene.killedEnemies.add(this),this.body.setVelocityY(Phaser.Math.Between(-100,-250)*(t/2)),this.body.setVelocityX((e?-100:100)*t),this.body.setAngularVelocity(Phaser.Math.Between(100,1e3)),this.scene.time.addEvent({delay:2e3,callbackScope:this,callback:()=>{this.smoke&&this.scene.smokeEmitter.emitters.remove(this.smoke),this.scene.killedEnemies.remove(this),this.scene.physics.world.disable(this),this.destroy()}})}}}});